!function(){var e="d_hotnews_b",t={};t.HOTNEWS='    \t<div id="rightDiv_hotnews_img">                <div class="hotnews_img">                    <div class="hotnews_img_header">                        <h3 class="clearfix"><strong>热点新闻</strong></h3>                        <a href="https://h5.mini.wps.cn/wps/agent/todaynews.html" class="icon_morenews" id="wpshotnews_more" target="_blank">更多</a>                    </div>                    <ul class="hotnews_imglist imgover" id="hotNewsUL">                        <li id="{{\'d_hotnews_b\' + el.id}}" soda-repeat="(key, el) in items" soda-class="el.content_type == \'1\' ? \'li_video\' : \'\'" wps_hotnews_id="{{el.id}}" style="display: {{key > 9 ? \'none\':\'block\'}}" wps_hotnews_url="{{el.url|Hot_NewsUrl:el.id:el.sourceid:el.rt:el.cates:el.title}}" >                            <span class="adsicon_rightimg" soda-if="el.key">广告</span>                            <div soda-if="el.key" soda-class="\'height_\' + el.key" soda-html="el.scripts"></div>                            <a soda-if="!el.key || el.key == \'custom\'" target="_blank" href="{{el.url|Hot_NewsUrl:el.id:el.sourceid:el.rt:el.cates:el.title}}">                                <span soda-if="!el.key || el.key == \'custom\'" class="nimg">                                    <span class="vd_maskicon"><span class="icon_play"></span></span>                                    <span class="vd_duration">{{el.video_info.duration|VideoTimeLength}}</span>                                    <img soda-src="{{el.img[0]|Hot_NewsPicSize}}" alt="">                                </span>                                <span class="span ntxt">{{el.title}}</span>                            </a>                        </li>                    </ul>                </div>            </div>',t.TEMP_PROMOTE_360_ONEPIC='        <a target="_blank" promlink=1 href="{{curl}}" metaurl="{{curl}}" slot="{{slot}}">            <span class="nimg">                <img soda-src="{{img}}" alt="">            </span>            <span class="ntxt">{{title}}</span></a>';var n=function(){var e=function(){var e={};return{exect:function(t){var n=$.extend(!0,{},t.cates),i=$.extend(!0,{},t.data),s={interval:function(e,t,n){for(var i=t.startpos-1;i<500;i=i+t.step+1)void 0===n[i]&&(n[i]=$.extend({},t),n[i].feedIndex=i,n[i].tabKey=e,n[i].promotId=t.key+"_"+e+"_"+i,n[i].scripts=o.parseHTML(n[i]),n[i].visualization=!1)},fix:function(e,t,n){var i=t.pos-1;void 0===n[i]&&(n[i]=$.extend({},t),n[i].feedIndex=i,n[i].tabKey=e,n[i].promotId=t.key+"_"+e+"_"+i,n[i].scripts=o.parseHTML(n[i]),n[i].visualization=!1)}};for(var a in n){e[a]={};for(var _=n[a],r=0,d=_.length;r<d;r++){var l=i[_[r]];s[l.insert_type]&&s[l.insert_type](a,l,e[a])}}},getRule:function(t){var n=e[t]?e[t]:e["*"]||{};return $.extend({},n)},setRule:function(t,n,o){$.extend(e[t][n],o)}}}(),o=function(){var o={baidu:'<div id="WPS_HOTNEWS_PROMOT_{{promotId}}"><script type="text/javascript">(function() {var idValue = "WPS_HOTNEWS_PROMOT_{{promotId}}";(window.slotbydup=window.slotbydup || []).push({id: "{{code}}",container: idValue,async: true});})();<\/script></div>',"360feed":'<div id="WPS_HOTNEWS_PROMOT_{{promotId}}"></div>',custom:'<div id="WPS_HOTNEWS_PROMOT_{{promotId}}"></div>',adx:'<div id="WPS_HOTNEWS_PROMOT_{{promotId}}" class="kso-adx-adSite-{{code}}"></div>',taobao:'<div id="WPS_HOTNEWS_PROMOT_{{promotId}}"><iframe src="{{url}}"></iframe></div>'},i=[],s={1:t.TEMP_PROMOTE_360_ONEPIC,2:t.TEMP_PROMOTE_360_ONEPIC,3:t.TEMP_PROMOTE_360_ONEPIC},a={baidu:function(e){e&&e.length&&avalon.each(e,function(e,t){WPS_NPP.DATACOLLECT.sendCollect("hotnews_sdk","deliveradvert",t.id,"baidu")})},"360feed":function(t){function o(e){e.bind("mousedown",function(){$(this).attr("data-starttime",(new Date).getTime())}),e.bind("mouseup",function(){(new Date).getTime();$(this).attr("data-endtime",(new Date).getTime())}),e.click(function(e){var t=$(this),n=Math.floor(e.pageX-t.offset().left),o=Math.floor(e.pageY-t.offset().top);t.attr("data-coordinatex",n).attr("data-coordinatey",o);var i=t.attr("data-starttime"),s=t.attr("data-endtime"),a=t.attr("metaurl");a=a.replace("__EVENT_TIME_START__",i).replace("__EVENT_TIME_END__",s).replace("__CPX__",n).replace("__CPY__",o).replace("__OFFSET_X__",n).replace("__OFFSET_Y__",o),t.attr("href",a)})}if(t&&t.length){var a={isbackup:!0,clktk:[],curl:t[0].url,img:t[0].img?t[0].img[0]:"",imptk:[],title:t[0].title,type:1};miniAgent.register(function(){!function(_){function r(e){if(i.length>=e)d(i.splice(0,e));else{if(l<=0){for(var n=new Array(e-i.length),o=0,s=n.length;o<s;o++)n[o]=a;return i=i.concat(n),void d(i)}miniAgent.get360AdData({adsId:t[0].code,size:e,adType:"hotnews_B",uuuid:WPS_NPP.DATACOLLECT.getUID()}).then(function(t){if(!(t.ads instanceof Array))return l--,void r(e);(i=i.concat(t.ads)).length<e&&l--,r(e)})}}function d(i){for(var a=0,_=i.length;a<_;a++)$("#WPS_HOTNEWS_PROMOT_"+t[a].promotId).html(soda(s[i[a].type],i[a])),e.setRule(t[a].tabKey,t[a].feedIndex,{ext:i[a]}),n.show(t[a].tabKey,t[a].feedIndex),WPS_NPP.DATACOLLECT.sendCollect("hotnews_sdk","deliveradvert",t[a].id,i[a].isbackup?"fixed360":"360feed"),o($("#WPS_HOTNEWS_PROMOT_"+t[a].promotId).find("[promlink=1]"))}var l=3;r(_)}(t.length)})}},adx:function(e){e&&e.length&&(WPS_NPP.DATACOLLECT.sendCollect("hotnews_sdk","deliveradvert",e[0].id,"adx"),WPS_NPP.COMON.leadInPromotJS("adx"))},custom:function(e){if(e&&e.length)for(var t=0,n=e.length;t<n;t++)WPS_NPP.DATACOLLECT.sendCollect("hotnews_sdk","deliveradvert",e[t].id,"custom")}};return{parseHTML:function(e){return WPS_NPP.COMON.leadInPromotJS(e.key),soda(o[e.key]||"",e)},reqPromotContent:function(t,n){var o=e.getRule(t);if(void 0!==o&&void 0!==n){for(var i={},s=0,_=n.length;s<_;s++){var r=o[n[s]];void 0!==a[r.key]&&(i[r.key]||(i[r.key]=[]),i[r.key].push(r))}for(var d in i)a[d](i[d])}}}}();return{init:function(t){t&&!$.isEmptyObject(t)?(t,e.exect(t)):console.log("推广初始失败：【空配置】")},getPromot:function(t){return e.getRule(t)},renderPromot:function(e,t){o.reqPromotContent(e,t)},click:function(t,n){var o=e.getRule(t)[n];switch(o.key){case"360feed":if(o.ext&&o.ext.clktk){var i=o.ext.clktk;if(!i.length)return;for(var s=$("#WPS_HOTNEWS_PROMOT_"+o.promotId+" [promlink=1]"),a=s.attr("data-starttime"),_=s.attr("data-endtime"),r=s.attr("data-coordinatex"),d=s.attr("data-coordinatey"),l=[],c=i.length-1;c>=0;c--)l.push(i[c].replace("__EVENT_TIME_START__",a).replace("__EVENT_TIME_END__",_).replace("__OFFSET_X__",r).replace("__OFFSET_Y__",d));miniAgent.trackClick({clktk:l,ref:"hotnews"}),WPS_NPP.DATACOLLECT.sendCollect("hotnews_sdk","monitor_trackClick",o.id)}}},show:function(t,n){var o=e.getRule(t)[n],i=$("#WPS_HOTNEWS_PROMOT_"+o.promotId);if(i.length&&WPS_NPP.COMON.isView(i.get(0)))switch(o.key){case"360feed":o.ext&&!o.ext.hasSendShow&&o.ext.imptk&&(o.ext.hasSendShow=!0,e.setRule(o.tabKey,o.feedIndex,{ext:o.ext}),miniAgent.trackImptk({imptk:o.ext.imptk,ref:"hotnews"}),WPS_NPP.DATACOLLECT.sendCollect("hotnews_sdk","monitor_trackImptk",o.id))}}}}(),o=function(){var e={};return{push:function(t,n){$.isArray(n);e[t]||(e[t]=[]);for(var o=0,i=n.length;o<i;o++)e[t].push({pos:n[o],visualization:!1})},send:WPS_NPP.COMON.debounce(function(){var t=e[0];if(t&&t.length)for(var o=n.getPromot(0),i=0,s=t.length;i<s;i++){var a=t[i];n.show(0,a.pos);var _=o[a.pos],r=$("#WPS_HOTNEWS_PROMOT_"+_.promotId);if(r.length){var d=WPS_NPP.COMON.isView(r.get(0));d!==a.visualization&&(a.visualization=d,d&&(a.visualization=!0,WPS_NPP.DATACOLLECT.sendCollect("hotnews_sdk","showadvert",_.id)))}}},200)}}();!function(){$(document);var i=$("#wps_minisite_hotnews");WPS_NPP.COMON.loadCss(i.next("script").attr("src").replace(".js",".css")),WPS_NPP.DATACOLLECT.sendCollect("hotnews_sdk","show"),soda.filter("Hot_NewsPicSize",function(e){var t=window.cefQuery?"&F=webp":"";return-1!==String(e).indexOf("wpscdn.cn")&&(e+="@base@tag=imgScale"+t+"&cox=0&coy=0&w=320&h=180&q=100&c=1&m=2"),e}),soda.filter("Hot_NewsUrl",function(t,n,o,i,s,a){t+="";var _=window.cefQuery?"&webp=1":"&webp=0";return-1!==t.indexOf("wps.cn")?t+=(-1===t.indexOf("?")?"?":"&")+"version="+WPS_NPP.FINAL_CONST.VERSION+_+"#":t+="#version="+WPS_NPP.FINAL_CONST.VERSION+"&",t+"__id="+n+"&__ref="+o+"&__rt="+i+"&__op=J"+(s?s[0]:"")+"&__cid="+WPS_NPP.FINAL_CONST.CID+"&__hid="+WPS_NPP.FINAL_CONST.HDID+"&__dist="+WPS_NPP.FINAL_CONST.DISNUM+"&__cversion="+WPS_NPP.FINAL_CONST.CLIENT_VER+"&__mgid="+WPS_NPP.FINAL_CONST.MINIGUID+"&__dc="+WPS_NPP.FINAL_CONST.DELIVER_CLIENT+"&__from="+e}),$(document).on("scroll",function(t){o.send(0),WPS_NPP.COMON.Imptk.imptk(e)});var s=function(s){if(s.length){if(!$.isEmptyObject(n.getPromot(0))){var a=function(e,t,o){var i=t.length,s=o.length>0?o[0].rectime:+new Date/1e3,a=t.concat(o||[]),_=n.getPromot(e),r=[];for(var d in _)if(!(+d<i)){if(+d>a.length)break;r.push(_[d].feedIndex),_[d].rectime=s,a.splice(d,0,_[d])}return[a,a.slice(i),r]}(0,[],s);s=a[1]}var _=soda(t.HOTNEWS,{items:s});i.append(_),WPS_NPP.COMON.Imptk.push(e,s),setTimeout(function(){WPS_NPP.COMON.Imptk.imptk("d_hotnews_b")}),$("#hotNewsUL li").on("click",function(e){WPS_NPP.DATACOLLECT.sendCollect("hotnews_sdk","clicklink",$(this).attr("wps_hotnews_id")||"",$(this).attr("wps_hotnews_url")||"");var t=$(e.target).parents("[id*=WPS_HOTNEWS_PROMOT_360feed]").attr("id");t&&(n.click(0,t.replace("WPS_HOTNEWS_PROMOT_360feed_0_","")),WPS_NPP.DATACOLLECT.sendCollect("hotnews_sdk","monitor_click",$(this).attr("wps_hotnews_id")))}),a&&(o.push(0,a[2]),n.renderPromot(0,a[2]),setTimeout(function(){o.send(0)},1e3));var r=1;$("#wpshotnews_nextpage").on("click",WPS_NPP.COMON.debounce(function(){$("#hotNewsUL li").hide(),1==r?$("#hotNewsUL li:gt(4)").show():$("#hotNewsUL li:lt(5)").show(),r=+!r,WPS_NPP.DATACOLLECT.sendCollect("hotnews_sdk","change_page")},200)),$("#wpshotnews_more").attr("href",$("#wpshotnews_more").attr("href")+"#__cid="+WPS_NPP.FINAL_CONST.CID+"&__hid="+WPS_NPP.FINAL_CONST.HDID+"&__dist="+WPS_NPP.FINAL_CONST.DISNUM+"&__cversion="+WPS_NPP.FINAL_CONST.CLIENT_VER+"&__mgid="+WPS_NPP.FINAL_CONST.MINIGUID+"&__dc=1&__gender="+WPS_NPP.FINAL_CONST.GENDER),$("#wpshotnews_more").on("click",function(){WPS_NPP.DATACOLLECT.sendCollect("hotnews_sdk","more_todayhot")})}};WPS_NPP.PROMOTCONTROL.getPromot(function(e){e.detailhot||console.log("【热闻推广配置不存在】",e);var t=e.detailhot;if(t&&t.length>0){var o={cates:{},data:t};o.cates[0]=[];for(var i=0,a=t.length;i<a;i++)o.cates[0].push(i);n.init(o)}$.ajax({type:"get",cache:!1,timeout:5e3,url:("https:"===location.protocol?"https:":"http:")+"//feed.mini.wps.cn/feed/v1/news/carousel",dataType:"jsonp",data:{hdid:WPS_NPP.DATACOLLECT.getUID(),newsid:WPS_NPP.FINAL_CONST.NEWSID,catid:WPS_NPP.FINAL_CONST.CID,distsrc:WPS_NPP.FINAL_CONST.DISNUM,client_type:WPS_NPP.FINAL_CONST.DELIVER_CLIENT,version:WPS_NPP.FINAL_CONST.CLIENT_VER},success:function(e){"ok"===e.result&&e.data&&e.data.hot_news&&e.data.hot_news.length?s(e.data.hot_news):(WPS_NPP.DATACOLLECT.sendCollect("hotnews_sdk","req_news","notfound"),console.log("【热点新闻】","返回异常：",e))},error:function(){WPS_NPP.DATACOLLECT.sendCollect("hotnews_sdk","req_news","error"),console.log("【热点新闻】","接口错误")}})})}(),console.log("【装载】热点新闻")}();