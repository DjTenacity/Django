!function(){var e="d_newslist_c",t={};t.TEMP_NEWS_NOPIC='            <li id="{{\'d_newslist_c\'+id}}" wpsnews_id="{{id}}" wpsnews_url="{{url| NewsUrl:id:sourceid:rt:cates:title}}">                <h3 class="newstitle">                    <a target="_blank" name="news_title" href="{{url| NewsUrl:id:sourceid:rt:cates:title}}">{{title}}</a>                </h3>                <div class="newsinfo">                    <div class="fl" soda-if="labels"><span class="newstag"><span>{{labels}}</span></span>                    </div>                    <div class="newsfrom">来源：<a style="text-decoration:none">{{from}}</a></div>                    <div class="fl"><span class="newstime">{{rectime|NewsTime}}</span></div>                </div>            </li>',t.TEMP_NEWS_ONEPIC='            <li id="{{\'d_newslist_c\'+id}}" wpsnews_id="{{id}}" wpsnews_url="{{url| NewsUrl:id:sourceid:rt:cates:title}}" soda-class="content_type == \'1\' ? \'li_video\' : \'\'">                <div class="li_height clearfix">                    <div class="newsimg imgover">                        <span class="loadingimg"></span>                        <a target="_blank" href="{{url| NewsUrl:id:sourceid:rt:cates:title}}">                            <span class="vd_maskicon"><span class="icon_play"></span></span>                            <span class="vd_duration">{{video_info.duration|VideoTimeLength}}</span>                            <img soda-src="{{img[0]|NewsPicSize}}" alt="" />                        </a>                    </div>                    <div class="newstxt">                        <div class="middletxt">                            <h3 class="newstitle">                                <a target="_blank" name="news_title" href="{{url| NewsUrl:id:sourceid:rt:cates:title}}">{{title}}</a>                            </h3>                            <div class="newsinfo">                                <div class="fl"soda-if="labels"><span class="newstag"><span>{{labels}}</span></span>                                </div>                                <div class="newsfrom">来源：                                    <a style="text-decoration:none">{{from}}</a>                                </div>                                <div class="fl"><span class="newstime">{{rectime|NewsTime}}</span></div>                            </div>                        </div>                    </div>                </div>            </li>',t.TEMP_NEWS_MULPIC='            <li id="{{\'d_newslist_c\'+id}}" wpsnews_id="{{id}}" wpsnews_url="{{url| NewsUrl:id:sourceid:rt:cates:title}}">                <h3 class="newstitle newstitle_ellipsis">                    <a target="_blank" name="news_title" href="{{url| NewsUrl:id:sourceid:rt:cates:title}}">{{title}}</a>                </h3>                <ul class="newslistimg imgover clearfix">                    <li soda-repeat="(index, el) in img" soda-if="index < 4" soda-class="index === (img.length - 1) ? \'last\' : \'\'"><span class="loadingimg"></span>                        <a target="_blank" href="{{url|NewsUrl:id:sourceid:rt:cates:title}}"><img soda-src="{{el|NewsPicSize}}" alt="" /></a>                    </li>                    <li class="more" name="mulpicnews"><a target="_blank" href="{{url| NewsUrl:id:sourceid:rt:cates:title}}">查看详情&gt;</a></li>                </ul>                <div class="newsinfo">                    <div class="fl" soda-if="labels"><span class="newstag"><span>{{labels}}</span></span>                    </div>                    <div class="newsfrom">来源：                        <a  style="text-decoration:none">{{from}}</a>                    </div>                    <div class="fl"><span class="newstime">{{rectime|NewsTime}}</span></div>                </div>            </li>',t.TEMP_PROMOTE_FATHER='            <li class="li_ads" id="{{\'d_newslist_c\'+id}}" wpsnews_id="{{id}}">                <div class="ads_area" isShow="0">                    <div soda-class="\'height_\' + key" soda-html="scripts"></div>                    <div class="newsinfo" style="cursor:default">                        <div class="fl"><span class="newstag"><span>广告</span></span></div>                        <div class="newsfrom">来源：                            <a style="text-decoration:none">{{from}}</a>                        </div>                        <div class="fl"><span class="newstime">{{rectime|NewsTime}}</span></div>                    </div>                </div>            </li>',t.TEMP_ACTION_VIEWOTHER='            <li class="markli_10" style="display: block;" id="viewmoreLI">                <a href="javascript:void(0)" class="timemark" id="nextrelate"><span class="arrowicon retxt">点击查看更多</span></a>            </li>',t.TEMP_ACTION_BACKHOME='            <li class="markli_20" style="display: block;">                <a href="javascript:void(0)" class="timemark" id="endRelate"><span class="homeicon retxt">返回首页查看更多的文章</span></a>            </li>',t.TEMP_PROMOTE_360_ONEPIC='            <div class="newsimg imgover">                <span class="loadingimg"></span>                <a target="_blank"  href="{{curl}}"><img soda-src="{{img}}" alt="" /></a>            </div>            <div class="newstxt">                <div class="middletxt">                    <h3 class="newstitle">                        <a target="_blank" name="news_title" href="{{curl}}" slot="{{slot}}">{{title}}</a>                    </h3>                </div>            </div>',t.TEMP_PROMOTE_360_MULPIC='            <h3 class="newstitle newstitle_ellipsis">                <a target="_blank" name="news_title" href="{{curl}}" slot="{{slot}}">{{title}}</a>            </h3>            <ul class="newslistimg imgover clearfix">                <li soda-repeat="(index, value) in assets" soda-if="index < assets.length">                    <span class="loadingimg"></span>                    <a target="_blank"  href="{{curl}}"><img soda-src="{{value.img}}" alt="" /></a>                </li>                <li class="more"><a target="_blank" href="{{curl}}">查看详情&gt;</a></li>            </ul>',t.TEMP_PROMOTE_360_BANNER='            <h3 class="newstitle newstitle_ellipsis">                <a target="_blank" name="news_title" href="{{curl}}" slot="{{slot}}">{{title}}</a>            </h3>            <div class="bannerimg_360">                <a href="{{curl}}" target="_blank"><img soda-src="{{img}}" alt="" /></a>            </div>',t.TEMP_PROMOTE_ZHIKE_ONEPIC='            <div class="newsimg imgover">                <span class="loadingimg"></span>                <a target="_blank"  href="{{url}}{{target ? "#__land=browser":""}}"><img soda-src="{{img[0]}}" alt="" /></a>            </div>            <div class="newstxt">                <div class="middletxt">                    <h3 class="newstitle">                        <a target="_blank" name="news_title" href="{{url}}{{target ? "#__land=browser":""}}">{{title}}</a>                    </h3>                </div>            </div>',t.TEMP_PROMOTE_ZHIKE_MULPIC='            <h3 class="newstitle newstitle_ellipsis">                <a target="_blank" name="news_title" href="{{url}}{{target ? "#__land=browser":""}}">{{title}}</a>            </h3>            <ul class="newslistimg imgover clearfix">                <li soda-repeat="(index, value) in img" soda-if="index < img.length">                    <span class="loadingimg"></span>                    <a target="_blank"  href="{{url}}{{target ? "#__land=browser":""}}"><img soda-src="{{value}}" alt="" /></a>                </li>                <li class="more"><a target="_blank" href="{{url}}{{target ? "#__land=browser":""}}">查看详情&gt;</a></li>            </ul>';var s=function(){var e=function(){var e={};return{exect:function(t){var s=$.extend(!0,{},t.cates),i=$.extend(!0,{},t.data),n={interval:function(e,t,s){for(var i=t.startpos-1;i<500;i=i+t.step+1)void 0===s[i]&&(s[i]=$.extend({},t),s[i].feedIndex=i,s[i].tabKey=e,s[i].promotId=t.key+"_"+e+"_"+i,s[i].scripts=a.parseHTML(s[i]),s[i].visualization=!1)},fix:function(e,t,s){var i=t.pos-1;void 0===s[i]&&(s[i]=$.extend({},t),s[i].feedIndex=i,s[i].tabKey=e,s[i].promotId=t.key+"_"+e+"_"+i,s[i].scripts=a.parseHTML(s[i]),s[i].visualization=!1)}};for(var l in s){e[l]={};for(var r=s[l],d=0,o=r.length;d<o;d++){var c=i[r[d]];n[c.insert_type]&&n[c.insert_type](l,c,e[l])}}},getRule:function(t){var s=e[t]?e[t]:e["*"]||{};return $.extend({},s)},setRule:function(t,s,i){$.extend(e[t][s],i)}}}(),a=function(){var a={baidu:'<div id="WPSPROMOT_{{promotId}}"><script type="text/javascript">(function() {var idValue = "WPSPROMOT_{{promotId}}";(window.slotbydup=window.slotbydup || []).push({id: "{{code}}",container: idValue,async: true});})();<\/script></div>',"360feed":'<div id="WPSPROMOT_{{promotId}}"></div>',custom:'<div id="WPSPROMOT_{{promotId}}"></div>',adx:'<div id="WPSPROMOT_{{promotId}}" class="kso-adx-adSite-{{code}}"></div>',taobao:'<div id="WPSPROMOT_{{promotId}}"><iframe src="{{url}}"></iframe></div>',google:'<div id="WPSPROMOT_{{promotId}}"></div>'},n=[],l={1:t.TEMP_PROMOTE_360_ONEPIC,2:t.TEMP_PROMOTE_360_MULPIC,3:t.TEMP_PROMOTE_360_BANNER,zhikeOne:t.TEMP_PROMOTE_ZHIKE_ONEPIC,zhikeMul:t.TEMP_PROMOTE_ZHIKE_MULPIC},r={baidu:function(e){if(e&&e.length)for(var t=0,s=e.length;t<s;t++)WPS_NPP.DATACOLLECT.sendCollect("suggestnews_sdk","deliveradvert",e[t].id,"baidu")},"360feed":function(t){if(t&&t.length){var i={isbackup:!0,clktk:[],curl:t[0].url,img:t[0].img?t[0].img[0]:"",imptk:[],title:t[0].title,type:1};miniAgent.register(function(){!function(a){function r(e){if(n.length>=e)d(n.splice(0,e));else{if(o<=0){for(var s=new Array(e-n.length),a=0,l=s.length;a<l;a++)s[a]=i;return n=n.concat(s),void d(n)}miniAgent.get360AdData({adsId:t[0].code,adType:"newslist_C",uuuid:WPS_NPP.DATACOLLECT.getUID()}).then(function(t){if(!(t.ads instanceof Array))return o--,void r(e);(n=n.concat(t.ads)).length<e&&o--,r(e)})}}function d(i){for(var a=0,n=i.length;a<n;a++)t[a].target&&(i[a].curl+="#__land=browser"),$("#WPSPROMOT_"+t[a].promotId).html(soda(l[i[a].type],i[a])),e.setRule(t[a].tabKey,t[a].feedIndex,{ext:i[a]}),s.show(t[a].tabKey,t[a].feedIndex),WPS_NPP.DATACOLLECT.sendCollect("suggestnews_sdk","deliveradvert",t[a].id,i[a].isbackup?"fixed360":"360feed")}var o=3;r(a)}(t.length)})}},adx:function(e){e&&e.length&&(WPS_NPP.DATACOLLECT.sendCollect("suggestnews_sdk","deliveradvert",e[0].id,"adx"),WPS_NPP.COMON.leadInPromotJS("adx"))},custom:function(e){if(e&&e.length)for(var t=0,s=e.length;t<s;t++)e[t].url+=(-1===e[t].url.indexOf("#")?"#":"&")+"version="+WPS_NPP.FINAL_CONST.VERSION+"&__hid="+WPS_NPP.FINAL_CONST.HDID+"&__dist="+WPS_NPP.FINAL_CONST.DISNUM+"&__cversion="+WPS_NPP.FINAL_CONST.CLIENT_VER+"&__mgid="+WPS_NPP.FINAL_CONST.MINIGUID+"&__dc="+WPS_NPP.FINAL_CONST.DELIVER_CLIENT,$("#WPSPROMOT_"+e[t].promotId).html(soda(l[e[t].img.length>1?"zhikeMul":"zhikeOne"],e[t])),$("#WPSPROMOT_"+e[t].promotId).parents("li[wpsnews_id]").attr("wpsnews_url",e[t].url),WPS_NPP.DATACOLLECT.sendCollect("suggestnews_sdk","deliveradvert",e[t].id,"custom")},taobao:function(e){e&&e.length&&WPS_NPP.DATACOLLECT.sendCollect("suggestnews_sdk","deliveradvert",e[0].id,"taobao")},google:function(e){e&&e.length&&(WPS_NPP.DATACOLLECT.sendCollect("suggestnews_sdk","deliveradvert",e[0].id,"google"),$("#WPSPROMOT_"+e[i].promotId).html(e[0].code))}};return{parseHTML:function(e){return WPS_NPP.COMON.leadInPromotJS(e.key),soda(a[e.key]||"",e)},reqPromotContent:function(t,s){var i=e.getRule(t);if(void 0!==i&&void 0!==s){for(var a={},n=0,l=s.length;n<l;n++){var d=i[s[n]];void 0!==r[d.key]&&(a[d.key]||(a[d.key]=[]),a[d.key].push(d))}for(var o in a)r[o](a[o])}}}}();return{init:function(t){t&&!$.isEmptyObject(t)?(t,e.exect(t)):console.log("推广初始失败：【空配置】")},getPromot:function(t){return e.getRule(t)},renderPromot:function(e,t){a.reqPromotContent(e,t)},click:function(t,s){var i=e.getRule(t)[s];switch(i.key){case"360feed":i.ext&&i.ext.clktk&&miniAgent.trackClick({clktk:i.ext.clktk})}},show:function(t,s){var i=e.getRule(t)[s],a=$("#WPSPROMOT_"+i.promotId);if(a.length&&WPS_NPP.COMON.isView(a.get(0)))switch(i.key){case"360feed":i.ext&&!i.ext.hasSendShow&&i.ext.imptk&&(i.ext.hasSendShow=!0,e.setRule(i.tabKey,i.feedIndex,{ext:i.ext}),miniAgent.trackImptk({imptk:i.ext.imptk}))}}}}();!function(){var i=0,a="",n=1,l=0,r=0,d=0,o=0,c=$(document),_=$("#wps_minisite_news");WPS_NPP.COMON.loadCss(_.next("script").attr("src").replace(".js",".css")),WPS_NPP.DATACOLLECT.sendCollect("suggestnews_sdk","show"),soda.filter("NewsPicSize",function(e){var t=window.cefQuery?"&F=webp":"";return-1!==String(e).indexOf("wpscdn.cn")&&(e+="@base@tag=imgScale"+t+"&cox=0&coy=0&w=150&h=98&q=100&c=1&m=2"),e}),soda.filter("NewsUrl",function(t,s,i,a,n,l){t+="";var r=window.cefQuery?"&webp=1":"&webp=0";return-1!==t.indexOf("wps.cn")?t+=(-1===t.indexOf("?")?"?":"&")+"version="+WPS_NPP.FINAL_CONST.VERSION+r+"#":t+="#version="+WPS_NPP.FINAL_CONST.VERSION+"&",t+"__id="+s+"&__ref="+i+"&__rt="+a+"&__op=E"+(n?n[0]||"":"")+"&__cid="+WPS_NPP.FINAL_CONST.CID+"&__hid="+WPS_NPP.FINAL_CONST.HDID+"&__dist="+WPS_NPP.FINAL_CONST.DISNUM+"&__cversion="+WPS_NPP.FINAL_CONST.CLIENT_VER+"&__mgid="+WPS_NPP.FINAL_CONST.MINIGUID+"&__dc="+WPS_NPP.FINAL_CONST.DELIVER_CLIENT+"&__from="+e}),soda.filter("NewsTime",function(e){return Time.ago(1e3*e)});var P=[],u=function(e,t,i){var a=t.length,n=i.length>0?i[0].rectime:+new Date/1e3,l=t.concat(i||[]),r=s.getPromot(e),d=[];for(var o in r)if(!(+o<a)){if(+o>l.length)break;d.push(r[o].feedIndex),r[o].rectime=n,l.splice(o,0,r[o])}return[l,l.slice(a),d]},g=function(){var e={};return{push:function(t,s){$.isArray(s),e[t]||(e[t]=[]);for(var i=0,a=s.length;i<a;i++)e[t].push({pos:s[i],visualization:!1})},send:WPS_NPP.COMON.debounce(function(){var t=e[0];if(t&&t.length)for(var i=s.getPromot(0),a=0,n=t.length;a<n;a++){var l=t[a];s.show(0,l.pos);var r=i[l.pos],d=$("#WPSPROMOT_"+r.promotId);if(d.length){var o=WPS_NPP.COMON.isView(d.get(0));o!==l.visualization&&(l.visualization=o,o&&(l.visualization=!0,WPS_NPP.DATACOLLECT.sendCollect("suggestnews_sdk","showadvert",r.id)))}}},200)}}(),w=function(){var e={};return{get:function(t){return e[t]||0},add:function(t,s){e[t]=e[t]||0,e[t]+=s}}}(),v=function(){r||(l++,$.ajax({type:"get",cache:!1,timeout:5e3,url:("https:"===location.protocol?"https:":"http:")+"//feed.mini.wps.cn/feed/v1/news/relate",dataType:"jsonp",data:{hdid:WPS_NPP.DATACOLLECT.getUID(),newsid:WPS_NPP.FINAL_CONST.NEWSID,version:WPS_NPP.FINAL_CONST.CLIENT_VER,distsrc:WPS_NPP.FINAL_CONST.DISNUM,first:n,rt:WPS_NPP.FINAL_CONST.RT,offset:w.get(0),client_type:WPS_NPP.FINAL_CONST.DELIVER_CLIENT,lasttime:a},success:function(i){n=0,a=i.data.next_start_time,i.data.show_size=5,"ok"===i.result&&i.data.news&&i.data.news.length?(WPS_NPP.COMON.Imptk.push(e,i.data.news,0),void 0===i.data.show_size&&(i.data.show_size=20),d+i.data.news.length>i.data.show_size&&(i.data.news.length=i.data.show_size-d),d+=i.data.news.length,1===l&&(_.addClass("rmdcon").append('<div class="rmdcon_title"><h3><strong>相关推荐</strong></h3></div><ul class="newslist" id="relateNews"></ul></div>'),$("#relateNews").on("click",function(e){var t=e.target.href||e.target.parentElement.href;if(!t){if(!(t=$(e.target).parents("li[wpsnews_url]").attr("wpsnews_url")))return;WPS_NPP.COMON.imitateLink(t,"_blank")}WPS_NPP.DATACOLLECT.sendCollect("suggestnews_sdk","clicklink",$(e.target).parents("li[wpsnews_id]").attr("wpsnews_id")||"",WPS_NPP.COMON.replaceUrl(t)),$(e.target).parents("li[wpsnews_id]").find("[name=news_title]").addClass("graylink");var i=$(e.target).parents("[id*=WPSPROMOT_360feed]").attr("id");i&&s.click(0,i.replace("WPSPROMOT_360feed_0_",""))})),w.add(0,i.data.news.length),function(e){if(e.length){if(!$.isEmptyObject(s.getPromot(0))){var i=u(0,P,e);P=i[0],e=i[1]}for(var a=[],n=0,l=e.length;n<l;n++)if(void 0!==e[n].key)a.push(soda(t.TEMP_PROMOTE_FATHER,e[n]));else{var r=e[n].img.length>=4?t.TEMP_NEWS_MULPIC:e[n].img.length<1?t.TEMP_NEWS_NOPIC:t.TEMP_NEWS_ONEPIC;a.push(soda(r,e[n]))}i&&setTimeout(function(){g.push(0,i[2]),s.renderPromot(0,i[2]),g.send(0)},100),$("#relateNews").append(a.join(""))}}(i.data.news),d<i.data.show_size||(r=1)):(WPS_NPP.DATACOLLECT.sendCollect("suggestnews_sdk","req_news","notfound"),console.log("【相关推荐】","返回异常：",i))},error:function(){WPS_NPP.DATACOLLECT.sendCollect("suggestnews_sdk","req_news","error"),console.log("【相关推荐】","接口错误")}}))};WPS_NPP.COMON.debounce(function(){var e="small",t=function(){if(void 0!=window.parent.innerWidth)return window.parent.innerWidth;var e=window.parent.document.body,t=window.parent.document.documentElement;return Math.min(t.clientWidth,e.clientWidth)}();t>=1276?e="large":t>=1024&&(e="middle"),$('[name="mulpicnews"]').each(function(){$(this).parent().removeClass("screen_small screen_large screen_middle").addClass("screen_"+e),$(this)["small"===e?"hide":"show"](),$(this).prev("li")["middle"===e?"hide":"show"]()})},200),WPS_NPP.COMON.debounce(function(){v(),WPS_NPP.DATACOLLECT.sendCollect("suggestnews_sdk","scroll_next")},200);c.on("scroll",function(t){WPS_NPP.COMON.Imptk.imptk(e,0),g.send(0),o=c.scrollTop(),i<=o&&WPS_NPP.COMON.isOnBottom(),setTimeout(function(){i=o},0)}),WPS_NPP.PROMOTCONTROL.getPromot(function(e){e.correlation||console.log("【相关推荐推广配置不存在】",e);var t=e.correlation;if(t&&t.length>0){var i={cates:{},data:t};i.cates[0]=[];for(var a=0,n=t.length;a<n;a++)i.cates[0].push(a);s.init(i)}v()})}(),console.log("【装载】相关推荐")}();